(this.webpackJsonpblog_ui=this.webpackJsonpblog_ui||[]).push([[0],{100:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a.n(c),n=a(34),r=a.n(n),o=(a(68),a(3)),l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAAA8CAMAAAA6wCQxAAAAA3NCSVQICAjb4U/gAAAARVBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////////9X1DS3AAAAFnRSTlMAIN8W+O1zLL810g2iCJGygFcEZj9L2X/xkQAAAF96VFh0UmF3IHByb2ZpbGUgdHlwZSBBUFAxAAAImeNKT81LLcpMVigoyk/LzEnlUgADYxMuE0sTS6NEAwMDCwMIMDQwMDYEkkZAtjlUKNEABZiYm6UBoblZspkpiM8FAE+6FWgbLdiMAAAGMklEQVRogdWa2datIAiAyzItm4f9/o96zCYBs7927rWOlw3qB4KARtE7rcoH2U7qpd5uNZWE7b/vis/cWBt4INKSrmRZ0BFU+dlaIYKOBFqVZw3XYwaF6w82rbzf6K4XXVmsQwaF6z52K0MOZVolhrJIjxFDwlUFgPvkAceKkjFrbLDQcDkc6tMGHCvK+Ie0c7hGepr9W+76oNHOf0BjNSHhqnisMd85nMgklcVqPV1sfagyRr5oJv2iRQ9lSDgzZTQR77LMGxcan/B3qoRfNIt1/VRzpk3Q6Pw219cOOIfpVLaS063Pn9rc0uBiu3AoPdLJ3FxOLz9Edii2h94yDb+N99kduEghd66bc467yNLuePjrfU6vy1twkSAudnR9tovMXntgVRe/iFAEMLrrfQ77PPcv4/oSOo3qoJOx67e3W3wTDscZbqe39koCyEmaFyz7TdJzFw5ZjvYYLh0kZvWmdMnqQDYbxl/lc7fhIryZu1z6AvcDZ+9v9+EmBMccejBwReUd2KO+412cj7lXz1UiRt2E86P7cER1A/1khnMsyuN91/CzrCAeGr7uL52chcRqt/dJxqGWjBuAlJWO/h7AjQjOoaHZB9dn/8ddOc/ZCTeTfdbNM97DPUa+rfJWFgVIatKaaO8B3B9Up5cud25kvVhSfifcSrbCCcsvcxAqVGNdfFiX9H0MAsIG0z2BI6ojIsucXSVTbckawqmxlUeAoFkSsOdY8UyczW+2IAAEhHixPIHrcXrQ4S8aAhxP9uQhnMqHEqYnAo+xbzhiSdPS7W8QhOB49QncpdUphnhbnPJbcLmkWbMgCdISf6stA92TwQpIBc3/EVyPrQ7ldNNH9uBBVzeEYJd9W5L0Vij8yIww7kv1MHMwFRQuPYIjex3KqmtMOzPgtWzZnBoQepzxrAPmNO8rmctgwVcFlOkzOKI64B0UR4OYVjWeX2DSnI7FaGS0tzlSsGJ2yxUDOA4t/RkcUR1YD51DcRFJl6C3BOS8Nt7RyuhbOKQlPAgH95+HcFh1tp/qpUtxEd4fAVwP4vGUL/4o3mxMqghYoSVLkIO9A0eSA2sjyunW4JgH0hzMK9PV88eLPJoE1Zfqk05fgkMVETvzKU8iZqgdBJeANcu2HvqpLlsTpILlZy37EHBEdbswxZniIh8c3K8kXdf2mrYZgsAR1W391icWh4t7Xjj6sw1nh1lB4IjDXP9NUkcKdBfOUbuwNwIrBYK11NfgKuQw16S1dSWvd+Ec6VK8G2W6W5zS6QGw1dfgSPhnNKbYqeJuwLmKmtOKwVY2NZWMl1MYzZFCmLG1gZ9XBb6D0wlBwZlcCmdqqplOT+NQNkcdZjcDe6pCX8JpA0uqDVN/JE3gEAoOq077uM6juO/hli+7xsx5zbtDwRHVjZH0lfPegFPDKtGt4BsMDquuzN2Vk9fgqmEfcZtqMDjsMFOfxb0ANx3C3KLPgHA4YfYq7ls4eEq0hUGP4SqR5/6jJqS601rlC3Dw5HOPYR7CJdlc1uGNp3KMTiOdhyJvwcGEqXQ+/jPcXhRNfYv1LM16HQ4mfF/C2RcdPHT2pC4U9x0cumzQOJ//EQ4URVNnXX9p1qH61TH3N4EzzrB2h/KkhgLrrvx8xofDvLyfAOFgEekq5SF+eVslADqFa+cMDp19e6a8q+7C4rDAYL5+laySKu3g6hN1CuGO+aEbJ54pb8NeXyyB0Rqch7qAI5VSZoZTDayGmvMRsfl38TXcprrriyXwzgsMZqCQHQkvub3EOhF3RZtAL8rquuFbSgmLBcda//uyjBQ8dzlvUMhQOygGdxze0eOSNJ21QS7csX1jhtI8JAaNn3knbQRxrbgcyhhIA686R2848Z9bS8ViipxLw/edDkOwxcz95pTM9uKLY8xIHXYJrNtEWdELgaUgxc8BH4OxZbbAgo4qB+2UDxt3bM3lvCyytOzqgmFfS3oLU89E1uad4/ROZxgkN4SzZfU6VXU85tuzaHB2ymS5CPQIv67YZtX5FdfrCFzQph+evlteYrxa8vmiBC/K7tiv+8GAcJkd21x8NuC6+eukl893IP5wd7ANfu11b4medpyguu8soIv8xdFT7r69gptwnln9L+0ftsVpfayhe2IAAAAASUVORK5CYII=",i=a(4),j=(a(69),a(6)),d=a(35),b=a(36),u=a.n(b),h=a(60),O=a(61),m="https://blogvital.pythonanywhere.com/api/",p=a.n(O).a.create({baseURL:m,timeout:5e3,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"application/json",Accept:"application/json"}});p.interceptors.response.use((function(e){return e}),function(){var e=Object(h.a)(u.a.mark((function e(t){var a,c,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,"undefined"!==typeof t.response){e.next=5;break}return console.log("unkown err"),alert("A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly."),e.abrupt("return",Promise.reject(t));case 5:if(401!==t.response.status||a.url!==m+"token/refresh/"){e.next=9;break}return console.log("need new refresh"),window.location.href="/login/",e.abrupt("return",Promise.reject(t));case 9:if(401!==t.response.status||"Unauthorized"!==t.response.statusText||a._retry){e.next=29;break}if(console.log("need new access"),a._retry=!0,!(c=localStorage.getItem("refresh_token"))){e.next=27;break}if(console.log(" I have a refresh token"),s=JSON.parse(atob(c.split(".")[1])),n=Math.ceil(Date.now()/1e3),console.log(s.exp,n),!(s.exp>n)){e.next=23;break}return console.log(c,"iam a working refresh token"),e.abrupt("return",p.post("/token/refresh/",{refresh:c}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),p.defaults.headers.Authorization="JWT "+e.data.access,a.headers.Authorization="JWT "+e.data.access,console.log("obtained new access token"),p(a)})).catch((function(e){console.log("failing this step"),console.log(e.response)})));case 23:console.log("Refresh token is expired",s.exp,n),window.location.href="/login/";case 25:e.next=29;break;case 27:console.log("Refresh token not available."),alert("PLease Login to view this page");case 29:return e.abrupt("return",Promise.reject(t));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var x=p,g=a(1),f=Object(c.createContext)(),v=f,N=function(e){var t=e.children,a=Object(c.useState)((function(){return localStorage.getItem("access_token")?localStorage.getItem("access_token"):null})),s=Object(o.a)(a,2),n=s[0],r=s[1],l=Object(c.useState)((function(){return localStorage.getItem("access_token")?Object(d.a)(localStorage.getItem("access_token")):null})),i=Object(o.a)(l,2),b=i[0],u=i[1],h=Object(c.useState)(null),O=Object(o.a)(h,2),m=O[0],p=O[1],v=Object(j.f)(),N={user:b,setUser:u,authTokens:n,login:function(e){x.post("token/",{email:e.email,password:e.password}).then((function(e){localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),x.defaults.headers.Authorization="JWT "+localStorage.getItem("access_token"),r(e.data),u(Object(d.a)(e.data.access)),p(null),v.push("/")})).catch((function(e){console.log(e),p(e)}))},logout:function(){console.log("auth logout clicked"),r(null),u(null),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),x.defaults.headers.Authorization=null,v.push("/login")},err:m,setErr:p};return Object(g.jsx)(f.Provider,{value:N,children:t})};function _(){var e=Object(c.useContext)(v),t=e.user,a=e.logout,s=Object(c.useState)({categories:[],dataIsReturned:!1}),n=Object(o.a)(s,2),r=n[0],j=n[1];return Object(c.useEffect)((function(){x.get("categories").then((function(e){j({categories:e.data,dataIsReturned:!0}),console.log(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(g.jsxs)("header",{className:"header",children:[Object(g.jsxs)("div",{className:"header__top",children:[Object(g.jsx)("div",{className:"header__logo",children:Object(g.jsx)("img",{src:l,alt:"logo"})}),Object(g.jsxs)("a",{id:"btnHamburger",className:"header__toggle",children:[Object(g.jsx)("span",{}),Object(g.jsx)("span",{}),Object(g.jsx)("span",{})]})]}),Object(g.jsxs)("nav",{className:"header__bottom",children:[r.dataIsReturned?Object(g.jsx)("ul",{className:"categories",children:r.categories.map((function(e){return Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/category/".concat(e.name),children:e.name})},e.id)}))}):null,t?Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{style:{color:"white"},children:Object(g.jsxs)(i.b,{to:"/profile",children:["Welcome ",t.username]})}),Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/",children:"Home"})}),Object(g.jsx)("li",{onClick:a,children:Object(g.jsx)(i.b,{children:"Logout"})})]}):Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/",children:"Home"})}),Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/login",children:"Login"})})]})]})]})}a(97);function w(){return Object(g.jsxs)("footer",{className:"footer",children:[Object(g.jsx)("div",{className:"footer__logo",children:Object(g.jsx)("img",{src:l,alt:"logo"})}),Object(g.jsxs)("ul",{className:"footer__links",children:[Object(g.jsx)("li",{children:Object(g.jsx)(i.b,{to:"/about",children:"About"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{children:"Get in touch"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{children:"Career"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{children:"Advertising"})})]}),Object(g.jsx)("div",{className:"footer__info",children:"Call us at +201111504980. \xa9 VIRAL 2018. Built by Mahmoud Sidky"})]})}var A=a(11),y=a(5);a(98);function k(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],s=t[1],n=function(){s(!a)},r=Object(c.useContext)(v),l=r.login,i=r.err,d=r.setErr,b=(Object(j.f)(),Object.freeze({email:"",password:""})),u=Object.freeze({email:"",user_name:"",password:"",password2:""}),h=Object(c.useState)(b),O=Object(o.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(u),N=Object(o.a)(f,2),_=N[0],w=N[1],k=function(e){p(Object(y.a)(Object(y.a)({},m),{},Object(A.a)({},e.target.name,e.target.value.trim())))},S=function(e){w(Object(y.a)(Object(y.a)({},_),{},Object(A.a)({},e.target.name,e.target.value.trim())))};return Object(g.jsx)("div",{className:"login-page",children:Object(g.jsx)("div",{className:"form",children:a?Object(g.jsxs)("form",{className:"register-form",children:[Object(g.jsx)("input",{type:"text",placeholder:"Email address",name:"email",onChange:S,value:_.email}),Object(g.jsx)("input",{type:"text",placeholder:"Username",name:"user_name",onChange:S,value:_.user_name}),Object(g.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:S,value:_.password}),Object(g.jsx)("input",{type:"password",placeholder:"Confirm password",name:"password2",onChange:S,value:_.password2}),i?Object(g.jsx)("p",{style:{color:"red"},children:i.response.data.detail}):null,Object(g.jsx)("button",{onClick:function(e){e.preventDefault(),x.post("user/create/",{email:_.email,user_name:_.user_name,password:_.password}).then((function(e){n(),alert("You have successfully created an account please login to continue")})).catch((function(e){d(e)}))},children:"create"}),Object(g.jsxs)("p",{className:"message",children:["Already registered? ",Object(g.jsx)("a",{onClick:n,children:"Sign In"})]})]}):Object(g.jsxs)("form",{className:"login-form",children:[Object(g.jsx)("input",{type:"text",placeholder:"Email or Username",name:"email",onChange:k,value:m.email}),Object(g.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:k,value:m.password}),Object(g.jsx)("button",{onClick:function(e){e.preventDefault(),l(m)},children:"login"}),i?Object(g.jsx)("p",{style:{color:"red"},children:i.response.data.detail}):null,Object(g.jsxs)("p",{className:"message",children:["Not registered? ",Object(g.jsx)("a",{onClick:n,children:"Create an account"})]}),Object(g.jsxs)("p",{className:"message",children:["Forgot password? ",Object(g.jsx)("a",{children:"Recover password"})]})]})})})}var S=a.p+"static/media/unavailable-image.080e5673.jpg";a(48);function I(e){return Object(g.jsxs)("div",{className:"PostFeatured",children:[Object(g.jsx)("div",{className:"PostFeatured__img",children:e.data.image?Object(g.jsx)("img",{src:e.data.image,alt:"post image"}):Object(g.jsx)("img",{src:S,alt:"post image"})}),Object(g.jsx)("div",{className:"PostFeatured__info",children:Object(g.jsxs)(i.b,{to:"/post/"+e.data.id,children:[Object(g.jsx)("h3",{children:e.data.title}),Object(g.jsx)("p",{children:e.data.brief}),Object(g.jsxs)("p",{children:[Object(g.jsx)("a",{href:"#",children:e.data.author})," - ",Object(g.jsx)("a",{href:"",children:e.data.updated})]})]})})]})}function C(e){var t=e.title,a=e.posts;return Object(g.jsxs)("div",{className:"PostWrapper",children:[Object(g.jsx)("h2",{className:"PostWrapper_title",children:t}),a&&a.length>0?Object(g.jsx)("div",{className:"PostWrapper_body",children:a.map((function(e,t){return Object(g.jsx)(i.b,{to:"/post/"+e.id,className:"gridItem",children:Object(g.jsxs)("div",{className:"post",children:[Object(g.jsx)("div",{className:"post_img",children:e.image?Object(g.jsx)("img",{src:e.image,alt:"post image"}):Object(g.jsx)("img",{src:S,alt:"no post image"})}),Object(g.jsxs)("div",{className:"post_info",children:[Object(g.jsx)("h3",{className:"post_title",children:e.title}),Object(g.jsx)("p",{className:"post_body",children:e.brief}),Object(g.jsxs)("p",{children:[Object(g.jsx)("a",{className:"post_author",children:e.author})," - ",Object(g.jsx)("a",{className:"post_date",children:e.updated})]})]})]},t)})}))}):Object(g.jsx)("div",{children:"no posts"}),a&&a.length>6?Object(g.jsx)("div",{className:"btn_more",children:Object(g.jsx)("a",{rel:"noopener noreferrer",children:"More"})}):null]})}var P=function(){var e=Object(c.useState)({posts:[],dataIsReturned:!1}),t=Object(o.a)(e,2),a=t[0],s=t[1];Object(c.useEffect)((function(){x.get("").then((function(e){console.log(e),s({posts:e.data,featured:e.data[0],dataIsReturned:!0})})).catch((function(e){console.log(e),s({posts:[],dataIsReturned:!1})}))}),[]);var n=a.dataIsReturned,r=a.posts,l=a.featured;return Object(g.jsx)("div",{className:"Home",children:n?Object(g.jsxs)("div",{children:[Object(g.jsx)(I,{data:l}),Object(g.jsx)(C,{title:"latest posts",posts:r})]}):Object(g.jsx)("p",{children:"Loading, Please wait a second ..."})})},R=a.p+"static/media/no_profile_picture.4f3c33c0.webp";a(99);var F=function(){var e=Object(c.useContext)(v),t=e.user,a=e.setUser,s=Object(j.f)(),n=Object.freeze({first_name:t.first_name,last_name:t.last_name,about:t.about}),r=Object(c.useState)(n),l=Object(o.a)(r,2),i=l[0],d=l[1],b=Object(c.useState)(null),u=Object(o.a)(b,2),h=u[0],O=u[1],m=Object(c.useState)("".concat(t.image)),p=Object(o.a)(m,2),f=p[0],N=p[1],_=Object(c.useState)(null),w=Object(o.a)(_,2),k=w[0];function S(){s.goBack()}function I(e){console.log(e.target.name),"about"===e.target.name?d(Object(y.a)(Object(y.a)({},i),{},Object(A.a)({},e.target.name,e.target.value))):d(Object(y.a)(Object(y.a)({},i),{},Object(A.a)({},e.target.name,e.target.value.trim()))),console.log(i)}return w[1],Object(g.jsxs)("div",{className:"profile_edit",children:[Object(g.jsx)("div",{className:"profile_photo",children:t.image?Object(g.jsx)("img",{src:f,alt:"new_profile_photo"}):Object(g.jsx)("img",{src:R,alt:"new_profile_photo"})}),Object(g.jsxs)("form",{children:[Object(g.jsx)("label",{htmlFor:"profile_photo",children:"Profile photo"}),Object(g.jsx)("input",{type:"file",id:"profile_photo",accept:"image/*",onChange:function(e){O(e.target.files[0]);var t=e.target.files[0],a=URL.createObjectURL(t);N(a)}}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"user_name",children:"Username"}),Object(g.jsx)("input",{type:"text",name:"user_name",disabled:!0,id:"user_name",value:t.username})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"first_name",children:"First name"}),Object(g.jsx)("input",{type:"text",name:"first_name",id:"first_name",onChange:I,value:i.first_name})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"last_name",children:"Last name"}),Object(g.jsx)("input",{type:"text",name:"last_name",id:"last_name",onChange:I,value:i.last_name})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"about",children:"About"}),Object(g.jsx)("textarea",{type:"text",name:"about",id:"about",onChange:I,rows:"5",value:i.about})]}),Object(g.jsx)("a",{className:"btn",onClick:function(e){e.preventDefault();var c=new FormData;c.append("first_name",i.first_name),c.append("last_name",i.last_name),c.append("about",i.about),h&&c.append("image",h),console.log(c),x.patch("user/update_user/".concat(t.user_id,"/"),c,{headers:{"content-type":"multipart/form-data"}}).then((function(e){a(Object(y.a)(Object(y.a)({},t),{},{about:e.data.about,first_name:e.data.first_name,last_name:e.data.last_name,profile_image:e.data.image,image:e.data.image})),S()})).catch((function(e){console.log(e)}))},children:"Update"})]}),Object(g.jsx)("a",{onClick:S,className:"btn",children:"Back"}),k?Object(g.jsx)("p",{className:"msg",children:k.response.data}):null]})};function B(e){var t=e.user;return Object(g.jsxs)("div",{className:" profile_info",children:[Object(g.jsx)("div",{className:"profile_info_img",children:t.image?Object(g.jsx)("img",{src:t.image,alt:"profile_image"}):Object(g.jsx)("img",{src:R,alt:"empty profile image"})}),Object(g.jsxs)("div",{className:"profile_info_text",children:[Object(g.jsxs)("h3",{children:[t.first_name," ",t.last_name]}),Object(g.jsx)("p",{children:t.about}),Object(g.jsx)(i.b,{to:"profile/edit",className:"btn",children:"Edit information"})]})]})}function E(e){var t=e.posts,a=e.setData;function c(e){x.delete("/".concat(e.target.attributes.postid.value)).then((function(c){a({posts:t,dataIsReturned:!1});var s=t.filter((function(t){return t.id!==e.target.attributes.postid.value}));a({posts:s,dataIsReturned:!0}),console.log("succesfully deleted")})).catch((function(e){return console.log(e.response)}))}return Object(g.jsx)("div",{className:"profile_history",children:t?Object(g.jsxs)("table",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"Title"}),Object(g.jsx)("th",{children:"Last Edit"}),Object(g.jsx)("th",{children:"Actions"})]}),t.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsxs)(i.b,{to:"/post/"+e.id,children:[" ",e.title]})}),Object(g.jsx)("td",{children:e.updated}),Object(g.jsxs)("td",{children:[Object(g.jsx)(i.b,{to:"/edit_post/"+e.id,className:"btn",hi:e.id,children:"Edit"}),Object(g.jsx)("a",{className:"btn rm",onClick:c,postid:e.id,children:"Delete"})]})]})}))]}):null})}var D=function(){var e=Object(c.useContext)(v),t=e.user,a=e.setUser,s=Object(c.useState)({posts:[],dataIsReturned:!1}),n=Object(o.a)(s,2),r=n[0],l=n[1],d=Object(c.useState)({user:null,dataIsReturned:!1}),b=Object(o.a)(d,2),u=b[0],h=b[1];return Object(c.useEffect)((function(){x.get("user/posts/").then((function(e){l({posts:e.data,dataIsReturned:!0})})).catch((function(e){return console.log(e.response)}))}),[r.dataIsReturned]),Object(c.useEffect)((function(){x.get("user/".concat(t.user_id,"/")).then((function(e){h({user:e.data,dataIsReturned:!0}),a(Object(y.a)(Object(y.a)({},t),{},{image:e.data.image}))})).catch((function(e){console.log(e),alert("something went wrong")}))}),[]),Object(g.jsx)("div",{className:"profile",children:Object(g.jsxs)(j.c,{children:[Object(g.jsxs)(j.a,{path:"/profile/",exact:!0,children:[Object(g.jsx)("h1",{children:"Your Profile"}),u.dataIsReturned?Object(g.jsx)(B,{user:t}):Object(g.jsx)("p",{children:"loading"}),Object(g.jsxs)("h2",{children:["Your Posts (",r.posts.length,") ",Object(g.jsx)(i.b,{to:"/new_post",className:"btn",style:{float:"right",margin:"0",backgroundColor:"green"},children:"New Post"})]}),r.dataIsReturned?Object(g.jsx)(E,{posts:r.posts,setData:l}):Object(g.jsx)("p",{children:"loading"})]}),Object(g.jsxs)(j.a,{path:"/profile/edit",params:{user:u.user},children:[Object(g.jsx)("h1",{children:"Edit Your Profile"}),Object(g.jsx)(F,{})]})]})})},L=(a(100),a(63)),z=a(26),U=a(39),M=(a(30),function(){return Object(g.jsxs)("div",{className:"social",children:[Object(g.jsxs)("div",{className:"fa",children:["Share ",Object(g.jsx)(z.a,{})]}),Object(g.jsxs)("div",{className:"tw",children:["Tweet ",Object(g.jsx)(z.c,{})]}),Object(g.jsx)("div",{className:"pn",children:Object(g.jsx)(U.b,{})}),Object(g.jsx)("div",{className:"go",children:Object(g.jsx)(U.a,{})})]})}),q=function(e){return Object(g.jsxs)("div",{className:"tags",children:[Object(g.jsx)(z.b,{}),e.tags.map((function(e){return Object(g.jsxs)("span",{children:[e," ,"]})}))]})},V=function(e){var t=Object(c.useContext)(v).user,a=Object(c.useState)(e.data),s=Object(o.a)(a,2),n=s[0],r=s[1],l=Object(c.useState)(5),i=Object(o.a)(l,2),j=i[0],d=i[1],b=Object.freeze({body:""}),u=Object(c.useState)(b),h=Object(o.a)(u,2),O=h[0],m=h[1];return Object(g.jsxs)("div",{className:"comments",children:[Object(g.jsx)("h1",{children:"Comments"}),n.slice(0,j).map((function(e,t){return Object(g.jsxs)("div",{className:"comment",children:[Object(g.jsxs)("div",{className:"comment_head",children:[Object(g.jsx)("div",{className:"usrImg",children:e.author.image?Object(g.jsx)("img",{src:"".concat(e.author.image),alt:"profile_image"}):Object(g.jsx)("img",{src:R,alt:"no_profile_image"})}),Object(g.jsxs)("div",{className:"info",children:[Object(g.jsx)("div",{className:"user",children:e.author.user_name}),Object(g.jsx)("div",{className:"date",children:e.created})]})]}),Object(g.jsx)("p",{className:"comment_body",children:e.body})]},t)})),n.length>j?Object(g.jsxs)("button",{onClick:function(){return d((function(e){return e+3}))},className:"btn",children:["load more (",n.length-j,")"]}):null,Object(g.jsxs)("form",{children:[Object(g.jsx)("h2",{children:"Post a new comment"}),Object(g.jsx)("textarea",{name:"comment",id:"",cols:"30",rows:"10",placeholder:"Enter your comment",res:!0,onChange:function(e){m(Object(y.a)(Object(y.a)({},b),{},{body:e.target.value}))},value:O.body}),Object(g.jsx)("input",{type:"submit",value:"PUBLISH",className:"submit btn",onClick:function(a){a.preventDefault(),x.post("createComment/",{post:e.postId,author:t.user_id,body:O.body}).then((function(e){console.log("now testing adding comment",e),e.data.author={user_name:t.username},e.data.author.image=R,r([].concat(Object(L.a)(n),[e.data])),m(b),d(n.length+1)})).catch((function(e){return console.log(e)}))}})]})]})};function Z(e){var t=e.match.params.id,a=Object(c.useState)({dataIsReturned:!1}),s=Object(o.a)(a,2),n=s[0],r=s[1],l=Object(c.useContext)(v).user;Object(c.useEffect)((function(){console.log("request started"),x.get(""+t).then((function(e){console.log(e),r({post:e.data,dataIsReturned:!0})})).catch((function(e){alert(e.response.statusText)}))}),[]);n.dataIsReturned;var j=n.post;return Object(g.jsx)("div",{className:"PostDetail",children:l?Object(g.jsx)("div",{children:n.dataIsReturned?Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{className:"PostDetail_title",children:n.post.title}),Object(g.jsxs)("div",{className:"PostDetail_wrapper",children:[Object(g.jsx)("p",{className:"PostDetail_brief",children:n.post.brief}),Object(g.jsx)(M,{}),Object(g.jsxs)("div",{className:"PostDetail_author",children:[n.post.author,Object(g.jsx)("a",{href:"#"})]}),Object(g.jsx)("div",{className:"PostDetail_date",children:n.post.updated}),j.image?Object(g.jsx)("div",{className:"PostDetail_image",children:Object(g.jsx)("img",{src:n.post.image,alt:"post image"})}):null,Object(g.jsx)("div",{className:"PostDetail_body",dangerouslySetInnerHTML:{__html:n.post.body}}),Object(g.jsx)(q,{tags:[n.post.category]}),Object(g.jsx)(M,{}),Object(g.jsx)(V,{data:n.post.comments,postId:t,updateComments:r})]})]}):Object(g.jsx)("h1",{children:"please wait loading"})}):Object(g.jsx)("div",{children:Object(g.jsxs)("h3",{children:["Please ",Object(g.jsx)(i.b,{to:"/login",children:"Login"})," to view this post"]})})})}var H=a(25),Q=a.n(H);var T=function(){var e=Object(j.f)(),t=Object(c.useContext)(v).user,a=Object.freeze({title:"",brief:"",status:"published",author:t.user_id}),s=Object(c.useState)(a),n=Object(o.a)(s,2),r=n[0],l=n[1],i=Object(c.useState)(""),d=Object(o.a)(i,2),b=d[0],u=d[1],h=Object(c.useState)(null),O=Object(o.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(null),N=Object(o.a)(f,2),_=N[0],w=N[1];function k(e){l(Object(y.a)(Object(y.a)({},r),{},Object(A.a)({},e.target.name,e.target.value))),console.log(r)}return Object(g.jsxs)("div",{className:"PostForm",children:[Object(g.jsx)("h1",{children:"Create New Post"}),_?Object(g.jsxs)("div",{children:["err",_]}):null,Object(g.jsxs)("form",{action:"",children:[Object(g.jsx)("label",{htmlFor:"title",children:"Title"}),Object(g.jsx)("input",{type:"text",id:"title",name:"title",onChange:k,value:r.title}),Object(g.jsx)("label",{htmlFor:"brief",children:"Brief"}),Object(g.jsx)("input",{type:"text",id:"Brief",name:"brief",onChange:k}),Object(g.jsx)("label",{htmlFor:"Body",children:"Body"}),Object(g.jsx)(Q.a,{theme:"snow",id:"Body",value:b,onChange:u}),Object(g.jsx)("label",{htmlFor:"Image",children:"Post Image"}),Object(g.jsx)("input",{type:"file",name:"Image",id:"Image",accept:"image/*",onChange:function(e){p(e.target.files[0])}}),Object(g.jsx)("a",{className:"btn",onClick:function(t){t.preventDefault();var a=new FormData;a.append("title",r.title),a.append("brief",r.brief),a.append("body",b),a.append("status",r.status),a.append("author",r.author),m&&a.append("image",m),console.log(a),x.post("",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){console.log(t),e.goBack()})).catch((function(e){w("Something went wrong please try again later")}))},children:"Submit"}),Object(g.jsx)("a",{className:"btn",onClick:e.goBack,children:"Back"})]})]})};var J=function(){var e=Object(j.f)(),t=Object(j.g)().id,a=Object(c.useContext)(v).user,s=Object(c.useState)({dataIsReturned:!1}),n=Object(o.a)(s,2),r=n[0],l=n[1],i=Object(c.useState)(""),d=Object(o.a)(i,2),b=d[0],u=d[1],h=Object(c.useState)(null),O=Object(o.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(null),N=Object(o.a)(f,2),_=N[0],w=N[1],k=Object(c.useState)(null),S=Object(o.a)(k,2),I=S[0],C=S[1];function P(e){l(Object(y.a)(Object(y.a)({},r),{},{post:Object(y.a)(Object(y.a)({},r.post),{},Object(A.a)({},e.target.name,e.target.value))})),console.log(r)}return Object(c.useEffect)((function(){x.get(""+t).then((function(e){console.log(e.data),u(e.data.body),l({post:e.data,dataIsReturned:!0}),p(e.data.image),w(e.data.image)})).catch((function(e){return console.log(e.response.status,e.response.statusText)}))}),[]),Object(g.jsxs)("div",{className:"PostForm",children:[Object(g.jsx)("h1",{children:"Edit Post"}),r.dataIsReturned?Object(g.jsxs)("form",{action:"",children:[Object(g.jsx)("label",{htmlFor:"title",children:"Title"}),Object(g.jsx)("input",{type:"text",id:"title",name:"title",value:r.post.title,onChange:P}),Object(g.jsx)("label",{htmlFor:"brief",children:"Brief"}),Object(g.jsx)("input",{type:"text",id:"Brief",name:"brief",value:r.post.brief,onChange:P}),Object(g.jsx)("label",{htmlFor:"Body",children:"Body"}),Object(g.jsx)(Q.a,{theme:"snow",id:"Body",value:b,onChange:u}),Object(g.jsx)("label",{htmlFor:"Image",children:"Post Image"}),Object(g.jsx)("input",{type:"file",name:"Image",id:"Image",accept:"image/*",onChange:function(e){p(e.target.files[0]),w(URL.createObjectURL(e.target.files[0]))}}),m?Object(g.jsx)("img",{src:_,alt:"post image"}):Object(g.jsx)("img",{src:r.post.image,alt:"post image"}),Object(g.jsx)("a",{className:"btn",onClick:function(e){e.preventDefault();var t=new FormData;t.append("title",r.post.title),t.append("brief",r.post.brief),t.append("body",b),t.append("status",r.post.status),t.append("author",a.user_id),m&&t.append("image",m),x.patch("/".concat(r.post.id,"/"),t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){C("Post updated succesfully"),console.log(e)})).catch((function(e){C("Something went wrong please try again later"),console.log(e)}))},children:"Submit"}),Object(g.jsx)("a",{className:"btn",onClick:e.goBack,children:"Back"})]}):Object(g.jsx)("p",{children:"loading"}),I?Object(g.jsx)("div",{className:"msg",children:I}):null]})};var Y=function(e){var t=Object(c.useState)(null),a=Object(o.a)(t,2),s=a[0],n=a[1],r=Object(j.g)();return Object(c.useEffect)((function(){x.get("?category__name=".concat(r.name)).then((function(e){n(e.data),console.log(s)})).catch((function(e){console.log(e)}))}),[r.name]),Object(g.jsx)("div",{children:Object(g.jsx)(C,{title:"".concat(r.name," Posts"),posts:s})})};function W(){return Object(g.jsx)("main",{className:"main",children:Object(g.jsxs)(j.c,{children:[Object(g.jsx)(j.a,{exact:!0,path:"/",children:Object(g.jsx)(P,{})}),Object(g.jsx)(j.a,{path:"/about",children:Object(g.jsx)("div",{className:"about",children:"about"})}),Object(g.jsx)(j.a,{path:"/post/:id",exact:!0,component:Z}),Object(g.jsx)(j.a,{path:"/login",children:Object(g.jsx)(k,{})}),Object(g.jsx)(j.a,{path:"/profile",children:Object(g.jsx)(D,{})}),Object(g.jsx)(j.a,{path:"/new_post",children:Object(g.jsx)(T,{})}),Object(g.jsx)(j.a,{path:"/edit_post/:id",component:J}),Object(g.jsx)(j.a,{path:"/category/:name",component:Y})]})})}a(174),a(175);var K=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(i.a,{children:Object(g.jsxs)(N,{children:[Object(g.jsx)(_,{}),Object(g.jsx)(W,{}),Object(g.jsx)(w,{})]})})})},X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,177)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(K,{})}),document.getElementById("root")),X()},48:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[176,1,2]]]);
//# sourceMappingURL=main.2f382ad4.chunk.js.map